<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"  name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <!--翻译-->
    <title>081417105李伟</title>
    <!--用来加载外部资源-->
    <!--绝对路径：完整路径 相对路径：从本文件出发去找-->
    <link rel="short icon" href="Resource/icon.png">
    <link rel="stylesheet" href="ExternalStyle.css">
    <style>
        article{
            /*一个值表示上右下左，两个值表示*/
            margin:20px;
        }
        h3{
            color: red;
            font-size: 18px;
            padding-bottom: 10px;
            border-bottom: 1px solid #dddddd;
        }
        h4{
            font-size: 14px;
        }
        p{
            font-size: 12px;
            /*首行缩进,em表示字体像素值的两倍
            line-height:设置行间距，文字在中间，上下距离相同*/
            text-indent: 2em;
            line-height: 2em;
        }
    </style>
</head>
<body>
<header>
    <span>平台风采</span>
</header>

<!--第二部分 图片-->
<section class="DS_second_section">
    <img src="Resource/banner4.png" alt="请检查一下您的网络">
</section>

<!--第三部分-->
<article>
    <h3 id="title"></h3>
    <h4 id="subTitle"></h4>
    <!--一段文字-->
    <p id="info"></p>
</article>

<footer>
    <a href="DropletService.html"><img src="Resource/nav10.png" alt=""> <span>小滴服务</span> </a>
    <a href="EnterpriseProject.html"><img src="Resource/nav20.png" alt=""> <span>企业项目</span> </a>
    <a href="ServiceProcedure.html"><img src="Resource/nav30.png" alt=""> <span>服务流程</span> </a>
    <a href=""><img src="Resource/nav41.png" alt=""> <span  style="color: red">平台风采</span> </a>
    <a href="MyDroplet.html"><img src="Resource/nav50.png" alt=""> <span>我的小滴</span> </a>
</footer>


<!--加载数据-->
<script>
    //定义公共部分的函数
    function assgin(obj) {
        var title_tag=document.getElementById("title")
        var subTitle_tag=document.getElementById("subTitle")
        var info_tag=document.getElementById("info");
        title_tag.innerHTML=obj.title;
        subTitle_tag.innerHTML=obj.subTitle
        info_tag.innerHTML=obj.info;
    }
    //删除缓存中内容用：localStorage.remove
    var obj_text=JSON.parse(localStorage.getItem("platform_json"));
    if(obj_text){
        var obj=obj_text.data
        assgin(obj)
    }else{
        //建立网络请求
        var xhr=new XMLHttpRequest();
        //建立连接
        xhr.open('get','https://mockapi.eolinker.com/2ZhGVxjacb39010e6753bd9c02ee803e6e3bfeab6e8007c/aboutus');
        //设置请求头
        xhr.setRequestHeader("content-type","application/x-www-form-urlencoded")
        //传递参数
        xhr.send();
        //获取返回值
        xhr.onreadystatechange=function (ev) {
            if (xhr.readyState==4 && xhr.status==200){
                //解析数据
                var responseData= JSON.parse(xhr.responseText)
                var obj=responseData.data;
                window.localStorage.setItem("platform_json",xhr.responseText)
                //window.localStorage.setItem("platform_obj",obj);这是存储的是对象
                assgin(obj)

            }
        }
    }
</script>


</body>
</html>